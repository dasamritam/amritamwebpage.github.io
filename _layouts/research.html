---
layout: default
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% elsif page.header.video.id and page.header.video.provider %}
  {% include page__hero_video.html %}
{% endif %}

{% if page.url != "/" and site.breadcrumbs %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<div id="main" role="main">
  {% include sidebar.html %}

  <div class="archive">
    {% unless page.header.overlay_color or page.header.overlay_image %}
      <h1 id="page-title" class="page__title">{{ page.title }}</h1>
    {% endunless %}
    {{ content }}
    
    <div class="research-grid">
      {% for item in site.research %}
        <div class="research-item">
          <a href="{{ item.url }}">
            {% if item.title == "Control of PDEs" %}
              <!-- Animated SVG for Control of PDEs -->
              <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                <!-- Gradient Background (matching other cards) -->
                <defs>
                  <linearGradient id="grad" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#00adb5;stop-opacity:1"/>
                    <stop offset="100%" style="stop-color:#393e46;stop-opacity:1"/>
                  </linearGradient>
                  <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#00adb5;stop-opacity:0.8" />
                    <stop offset="100%" style="stop-color:#ff3300;stop-opacity:0.8" />
                  </linearGradient>
                </defs>
                
                <!-- Background rectangle with rounded corners (matching other cards) -->
                <rect x="10" y="10" width="180" height="180" rx="20" fill="url(#grad)"/>
                
                <!-- 3D Grid (moderately scaled to fit the background) -->
                <g opacity="0.9" transform="translate(20, 20) scale(1.8)">
                  <rect x="40" y="60" width="25" height="25" fill="#00adb5"/>
                  <rect x="65" y="60" width="25" height="25" fill="#ffffff"/>
                  <rect x="90" y="60" width="25" height="25" fill="#ff3300"/>
                  <rect x="115" y="60" width="25" height="25" fill="#ff3300"/>
                  <rect x="40" y="85" width="25" height="25" fill="#ffffff"/>
                  <rect x="65" y="85" width="25" height="25" fill="#ff3300"/>
                  <rect x="90" y="85" width="25" height="25" fill="#ff3300"/>
                  <rect x="115" y="85" width="25" height="25" fill="#ff3300"/>
                  <rect x="40" y="110" width="25" height="25" fill="#ff3300"/>
                  <rect x="65" y="110" width="25" height="25" fill="#ff3300"/>
                  <rect x="90" y="110" width="25" height="25" fill="#ff3300"/>
                  <rect x="115" y="110" width="25" height="25" fill="#ff3300"/>
                </g>
                
                <!-- Animated Circle (appropriately sized) -->
                <g opacity="0.7">
                  <circle cx="100" cy="100" r="25" fill="url(#gradient1)" stroke="white" stroke-width="3">
                    <animate attributeName="cx" values="30;170;30" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="cy" values="100;100;100" dur="4s" repeatCount="indefinite"/>
                  </circle>
                </g>
              </svg>
            {% else %}
              <img src="{{ item.image }}" alt="{{ item.title }}">
            {% endif %}
            <h3>{{ item.title }}</h3>
            <p>{{ item.description }}</p>
          </a>
          <div class="details" style="display: none;">{{ item.additional_info }}</div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<script>
function toggleDetails(item) {
  // Single pop effect
  item.classList.add('clicked');
  
  // Remove pop after animation completes
  setTimeout(() => {
    item.classList.remove('clicked');
  }, 300);
  
  // Toggle details
  const details = item.querySelector('.details');
  if (details) {
    details.classList.toggle('show');
  }
}

// Add click sound effect (optional)
function addClickSound() {
  // You can add a subtle click sound here if desired
  // const audio = new Audio('path/to/click-sound.mp3');
  // audio.volume = 0.1;
  // audio.play();
}

// Enhanced click handling with single-pop effect
document.addEventListener('DOMContentLoaded', function() {
  const researchItems = document.querySelectorAll('.research-item');
  
  researchItems.forEach(item => {
    item.addEventListener('click', function(e) {
      // Prevent default link behavior
      e.preventDefault();
      
      // Add sophisticated single-pop click effect
      toggleDetails(this);
      addClickSound();
      
      // Navigate to the link after the single pop animation completes
      setTimeout(() => {
        const link = this.querySelector('a');
        if (link) {
          window.location.href = link.href;
        }
      }, 400); // Shorter delay for single pop
    });
  });
});
</script>